<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}CampusFlow{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>ðŸŽ“</text></svg>">
        {% block stylesheets %}
            <script src="https://cdn.tailwindcss.com/3.4.1"></script>
        {% endblock %}

        {% block javascripts %}
            {% block importmap %}{{ importmap('app') }}{% endblock %}
        {% endblock %}
    </head>
    <body class="bg-gray-50 min-h-screen">
        {% if app.user %}
            <nav class="bg-indigo-600 text-white shadow-lg">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between h-16">
                        <div class="flex items-center">
                            <a href="{% if 'ROLE_ADMIN' in app.user.roles %}{{ path('admin_dashboard') }}{% elseif 'ROLE_TEACHER' in app.user.roles %}{{ path('teacher_dashboard') }}{% else %}{{ path('student_dashboard') }}{% endif %}" class="text-xl font-bold">
                                ðŸŽ“ CampusFlow
                            </a>
                            <div class="ml-10 flex items-baseline space-x-4">
                                {% if 'ROLE_ADMIN' in app.user.roles %}
                                    <a href="{{ path('admin_dashboard') }}" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">Dashboard</a>
                                    <a href="{{ path('admin_student_index') }}" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">Ã‰tudiants</a>
                                    <a href="{{ path('admin_classe_index') }}" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">Classes</a>
                                    <a href="{{ path('admin_teacher_index') }}" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">Enseignants</a>
                                    <a href="{{ path('admin_subject_index') }}" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">MatiÃ¨res</a>
                                    <a href="{{ path('admin_schedule_index') }}" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">Emploi du temps</a>
                                    <a href="{{ path('admin_grades_index') }}" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">Notes</a>
                                {% elseif 'ROLE_TEACHER' in app.user.roles %}
                                    <a href="{{ path('teacher_dashboard') }}" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">Dashboard</a>
                                {% elseif 'ROLE_STUDENT' in app.user.roles %}
                                    <a href="{{ path('student_dashboard') }}" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">Dashboard</a>
                                {% endif %}
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="text-sm mr-4">{{ app.user.email }}</span>
                            <a href="{{ path('app_logout') }}" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">DÃ©connexion</a>
                        </div>
                    </div>
                </div>
            </nav>
        {% endif %}

        <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            {% for message in app.flashes('success') %}
                <div class="mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert">
                    <span class="block sm:inline">{{ message }}</span>
                </div>
            {% endfor %}

            {% for message in app.flashes('error') %}
                <div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
                    <span class="block sm:inline">{{ message }}</span>
                </div>
            {% endfor %}

            {% block body %}{% endblock %}
        </main>
    </body>
</html>
